{% extends 'base.html' %} 
{% block title %}Home{% endblock %} 
{% block content%}
<div class="container-fluid pb-5">
  <div class="row">
    <!-- Main Content -->
    <div class="{% if user.is_authenticated and budget_alerts %}col-md-8{% else %}col-md-12{% endif %}">
      <div class="p-5 mb-4 bg-light rounded-3">
        <div class="container-fluid py-5">
          <h1 class="display-5 fw-bold">Welcome to MoneyParce</h1>
          {% if user.is_authenticated %}
            <p class="col-md-8 fs-4">Manage your finances effectively.</p>
            <div class="mb-3 d-flex flex-wrap gap-2">
              <a href="{% url 'profile' %}" class="btn btn-primary btn-lg">View Profile</a>
              <a href="{% url 'transactions:transaction_list' %}" class="btn btn-success btn-lg">Transactions</a>
              <a href="{% url 'goals:goal_list' %}" class="btn btn-info btn-lg">Goals</a>
              <a href="{% url 'budgets:budget_dashboard' %}" class="btn btn-warning btn-lg">Budgets</a>
              <a href="{% url 'bill_reminders' %}" class="btn btn-dark btn-lg">Reminders</a>
              <a href="{% url 'charts:dashboard' %}" class="btn btn-danger btn-lg">Charts</a>
              <a href="{% url 'reports:yearly_report' %}" class="btn btn-secondary btn-lg">Reports</a>
              {% if user.age is not None and user.age >= 18 and user.age <= 22 %}
              <a href="{% url 'scholarships:dashboard' %}" class="btn btn-success btn-lg">Scholarships</a>
              {% endif %}
            </div>
          {% else %}
            <p class="col-md-8 fs-4">Your personal finance management solution to track spending, create budgets, set goals, and more!</p>
            <a href="{% url 'register' %}" class="btn btn-primary btn-lg">Get Started</a>
            <a href="{% url 'two_factor:login' %}" class="btn btn-outline-secondary btn-lg">Login</a>
          {% endif %}
        </div>
      </div>

      {% if not user.is_authenticated %}
        <div class="row text-center mt-4">
          <div class="col-md-4">
            <h3><i class="bi bi-receipt"></i> Track Spending</h3>
            <p>Easily log and categorize your transactions.</p>
          </div>
          <div class="col-md-4">
            <h3><i class="bi bi-piggy-bank-fill"></i> Create Budgets</h3>
            <p>Set monthly budgets and monitor your progress.</p>
          </div>
          <div class="col-md-4">
            <h3><i class="bi bi-bullseye"></i> Set Goals</h3>
            <p>Define financial goals and track your savings.</p>
          </div>
        </div>
      {% endif %}

    </div>

    <!-- Alerts Sidebar -->
    {% if user.is_authenticated and budget_alerts %}
    <div class="col-md-4">
      <div class="card sticky-top" style="top: 20px;">
        <div class="card-header bg-primary text-white">
          <h5 class="card-title mb-0">
            <i class="bi bi-bell"></i> Alerts
          </h5>
        </div>
        <div class="card-body">
          <div class="alerts-section mb-4">
            {% for alert in budget_alerts %}
            <a href="{% url 'budgets:budget_dashboard' %}" class="text-decoration-none">
              <div class="alert alert-{{ alert.level }} alert-dismissible fade show mb-3" role="alert">
                {{ alert.message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" 
                        onclick="event.preventDefault();"></button>
              </div>
            </a>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</div>

<!-- Daily Tip Section - Moved outside the main content flow and fixed -->
{% if user.is_authenticated and daily_tip %}
<div class="fixed-bottom bg-light border-top border-info p-3 text-center shadow-lg">
  <div class="container">
    <h5 class="card-title text-info mb-1"><i class="bi bi-lightbulb-fill"></i> Daily Financial Tip</h5>
    <p class="card-text mb-0">{{ daily_tip }}</p>
  </div>
</div>
{% endif %}
<!-- End Daily Tip Section -->

{% endblock %}
